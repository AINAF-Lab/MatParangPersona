<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>General Prompt Generator (SCOFFE)</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background: #f4f4f4; max-width: 800px; margin: auto; }
  h1 { text-align: center; color: #333; }
  label { display: block; margin-top: 15px; font-weight: bold; }
  input, textarea { width: 100%; padding: 8px; margin-top: 5px; font-size: 14px; box-sizing: border-box; }
  small { display: block; color: #555; margin-top: 3px; }
  button { padding: 10px 20px; margin: 10px 5px 0 0; font-size: 16px; cursor: pointer; }
  pre { background: #eee; padding: 10px; white-space: pre-wrap; word-wrap: break-word; margin-top: 10px; }
  .error { color: red; margin-top: 5px; }
  .nav-buttons { margin-top: 20px; text-align: center; }
</style>
</head>
<body>

<h1>General Prompt Generator (SCOFFE)</h1>

<div id="scoffe-form">
  <label>Situation
    <input id="situation" maxlength="200" placeholder="One sentence: what just happened or what you need now.">
    <small>Short sentence describing the immediate issue or goal (max 200 chars).</small>
  </label>

  <label>Context
    <input id="context" maxlength="300" placeholder="Key constraints or relevant facts.">
    <small>1-2 concise facts that matter for the task (max 300 chars).</small>
  </label>

  <label>Operation
    <input id="operation" maxlength="120" placeholder="Action: summarize, draft, triage, etc.">
    <small>What you want the model to do (max 120 chars).</small>
  </label>

  <label>Persona
    <input id="persona" maxlength="120" placeholder="Tone/role: e.g., Calm product lead">
    <small>The role or tone the AI should assume.</small>
  </label>

  <label>Expectation
    <input id="expectation" maxlength="200" placeholder="Limits/metrics: e.g., max steps, word count">
    <small>Measurable limits or success criteria.</small>
  </label>

  <label>Format
    <input id="format" maxlength="300" placeholder="Output structure: subject line, bullets, reply, etc.">
    <small>Exact output fields and structure.</small>
  </label>

  <label>Example
    <textarea id="example" maxlength="600" placeholder="Optional example output."></textarea>
    <small>Paste 1-2 short exemplar outputs for reproducibility.</small>
  </label>

  <div class="error" id="error-msg"></div>

  <button id="assemble">Assemble Prompt</button>
  <button id="auto-correct">Auto-Correct (1 Pass)</button>
  <pre id="assembled"></pre>
  <button id="copy">Copy Prompt</button>

  <!-- Nav buttons -->
  <div class="nav-buttons">
    <button onclick="location.href='index.html'">Back to Home</button>
    <button onclick="location.href='persona.html'">Go to Persona Prompt Generator</button>
  </div>
</div>

<script>
function getFieldValues() {
  return {
    S: document.getElementById('situation').value.trim(),
    C: document.getElementById('context').value.trim(),
    O: document.getElementById('operation').value.trim(),
    P: document.getElementById('persona').value.trim(),
    E: document.getElementById('expectation').value.trim(),
    F: document.getElementById('format').value.trim(),
    X: document.getElementById('example').value.trim()
  };
}

function verifyFields(fields) {
  let errors = [];
  if(!fields.S) errors.push("Situation is required.");
  if(!fields.C) errors.push("Context is required.");
  if(!fields.O) errors.push("Operation is required.");
  if(fields.S.length > 200) errors.push("Situation exceeds 200 characters.");
  if(fields.C.length > 300) errors.push("Context exceeds 300 characters.");
  if(fields.O.length > 120) errors.push("Operation exceeds 120 characters.");
  return errors;
}

function assemblePrompt(fields) {
  const parts = [];
  if(fields.S) parts.push(`Situation: ${fields.S}`);
  if(fields.C) parts.push(`Context: ${fields.C}`);
  if(fields.O) parts.push(`Operation: ${fields.O}`);
  if(fields.P) parts.push(`Persona: ${fields.P}`);
  if(fields.E) parts.push(`Expectation: ${fields.E}`);
  if(fields.F) parts.push(`Format: ${fields.F}`);
  if(fields.X) parts.push(`Example: ${fields.X}`);
  parts.push("Then: generate the output following the Format exactly; if the output does not meet Expectation, produce a 1-line rationale and a corrected version.");
  return parts.join('\n');
}

function updateOutput(text) {
  document.getElementById('assembled').textContent = text;
}

document.getElementById('assemble').addEventListener('click', () => {
  const fields = getFieldValues();
  const errors = verifyFields(fields);
  if(errors.length) {
    document.getElementById('error-msg').textContent = errors.join(" ");
    return;
  } else {
    document.getElementById('error-msg').textContent = "";
  }
  updateOutput(assemblePrompt(fields));
});

document.getElementById('auto-correct').addEventListener('click', () => {
  let fields = getFieldValues();
  fields.S = fields.S.slice(0,200);
  fields.C = fields.C.slice(0,300);
  fields.O = fields.O.slice(0,120);
  let correctedPrompt = assemblePrompt(fields) + "\nAuto-correct: trimmed fields to meet character limits.";
  updateOutput(correctedPrompt);
});

document.getElementById('copy').addEventListener('click', () => {
  navigator.clipboard.writeText(document.getElementById('assembled').textContent);
  alert("Prompt copied to clipboard!");
});
</script>

</body>
</html>
