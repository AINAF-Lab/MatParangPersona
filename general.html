<!DOCTYPE html>
<html lang="ms">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Penjana Prompt Umum</title>
<style>
body { font-family: Arial, sans-serif; padding: 20px; max-width: 800px; margin: auto; background: #f4f4f4; }
h1 { text-align: center; color: #333; }
label { display: block; margin-top: 15px; font-weight: bold; }
input, textarea { width: 100%; padding: 8px; margin-top: 5px; font-size: 14px; box-sizing: border-box; }
button { padding: 10px 20px; margin: 10px 5px 0 0; font-size: 16px; cursor: pointer; }
pre { background: #eee; padding: 10px; white-space: pre-wrap; word-wrap: break-word; margin-top: 10px; }
nav { text-align: center; margin-top: 20px; }
.error { color: red; margin-top: 5px; }
</style>
</head>
<body>

<div style="text-align:center; margin-bottom:20px;">
  <button onclick="switchLanguage('ms')">Bahasa Melayu</button>
  <button onclick="switchLanguage('en')">English</button>
</div>

<h1 id="title">Penjana Prompt Umum (SCOFFE)</h1>

<div id="scoffe-form">
  <label id="lbl-situation">Situasi
    <input id="situation" maxlength="200" placeholder="Satu ayat ringkas mengenai masalah atau keperluan.">
    <small>Ayat ringkas tentang isu atau matlamat semasa.</small>
  </label>

  <label id="lbl-context">Konteks
    <input id="context" maxlength="300" placeholder="Fakta penting atau had berkaitan.">
    <small>1-2 fakta ringkas yang relevan untuk tugas.</small>
  </label>

  <label id="lbl-operation">Operasi
    <input id="operation" maxlength="120" placeholder="Tindakan: ringkasan, draf, banding, dsb.">
    <small>Apa tindakan yang dikehendaki model lakukan.</small>
  </label>

  <label id="lbl-persona">Persona
    <input id="persona" maxlength="120" placeholder="cth., Ketua Produk Tenang; jurutera kanan.">
    <small>Peranan atau nada model AI.</small>
  </label>

  <label id="lbl-expectation">Jangkaan
    <input id="expectation" maxlength="200" placeholder="Had atau metrik kejayaan.">
    <small>Batasan atau kriteria kejayaan.</small>
  </label>

  <label id="lbl-format">Format
    <input id="format" maxlength="300" placeholder="Struktur output: tajuk, senarai, jawapan, dsb.">
    <small>Medan dan struktur output.</small>
  </label>

  <label id="lbl-example">Contoh
    <textarea id="example" maxlength="600" placeholder="Contoh output (pilihan)."></textarea>
    <small>1-2 contoh ringkas untuk rujukan.</small>
  </label>

  <div class="error" id="error-msg"></div>

  <button id="assemble">Hasilkan Prompt</button>
  <pre id="assembled"></pre>
  <button id="copy">Salin Prompt</button>

  <div style="margin-top:20px;">
    <button onclick="location.href='index.html'" id="btn-home">Kembali ke Laman Utama</button>
    <button onclick="location.href='persona.html'" id="btn-persona">Pergi ke Penjana Prompt Persona</button>
  </div>
</div>

<script>
const translations = {
  ms: {
    title: "Penjana Prompt Umum (SCOFFE)",
    lblSituation: "Situasi",
    situationPlaceholder: "Satu ayat ringkas mengenai masalah atau keperluan.",
    lblContext: "Konteks",
    contextPlaceholder: "Fakta penting atau had berkaitan.",
    lblOperation: "Operasi",
    operationPlaceholder: "Tindakan: ringkasan, draf, banding, dsb.",
    lblPersona: "Persona",
    personaPlaceholder: "cth., Ketua Produk Tenang; jurutera kanan.",
    lblExpectation: "Jangkaan",
    expectationPlaceholder: "Had atau metrik kejayaan.",
    lblFormat: "Format",
    formatPlaceholder: "Struktur output: tajuk, senarai, jawapan, dsb.",
    lblExample: "Contoh",
    examplePlaceholder: "Contoh output (pilihan).",
    assemble: "Hasilkan Prompt",
    copy: "Salin Prompt",
    btnHome: "Kembali ke Laman Utama",
    btnPersona: "Pergi ke Penjana Prompt Persona",
    alertCopied: "Prompt disalin!"
  },
  en: {
    title: "General Prompt Generator (SCOFFE)",
    lblSituation: "Situation",
    situationPlaceholder: "One short sentence about the issue or need.",
    lblContext: "Context",
    contextPlaceholder: "Key constraints or relevant facts.",
    lblOperation: "Operation",
    operationPlaceholder: "Action: summarize, draft, compare, etc.",
    lblPersona: "Persona",
    personaPlaceholder: "e.g., Calm product lead; senior engineer.",
    lblExpectation: "Expectation",
    expectationPlaceholder: "Limits or success metrics.",
    lblFormat: "Format",
    formatPlaceholder: "Output structure: subject line, bullets, reply, etc.",
    lblExample: "Example",
    examplePlaceholder: "Optional example output.",
    assemble: "Assemble Prompt",
    copy: "Copy Prompt",
    btnHome: "Back to Home",
    btnPersona: "Go to Persona Prompt Generator",
    alertCopied: "Prompt copied!"
  }
};

let currentLang = 'ms';

function switchLanguage(lang){
  currentLang = lang;
  const t = translations[lang];
  document.getElementById('title').textContent = t.title;
  document.getElementById('lbl-situation').childNodes[0].textContent = t.lblSituation;
  document.getElementById('situation').placeholder = t.situationPlaceholder;
  document.getElementById('lbl-context').childNodes[0].textContent = t.lblContext;
  document.getElementById('context').placeholder = t.contextPlaceholder;
  document.getElementById('lbl-operation').childNodes[0].textContent = t.lblOperation;
  document.getElementById('operation').placeholder = t.operationPlaceholder;
  document.getElementById('lbl-persona').childNodes[0].textContent = t.lblPersona;
  document.getElementById('persona').placeholder = t.personaPlaceholder;
  document.getElementById('lbl-expectation').childNodes[0].textContent = t.lblExpectation;
  document.getElementById('expectation').placeholder = t.expectationPlaceholder;
  document.getElementById('lbl-format').childNodes[0].textContent = t.lblFormat;
  document.getElementById('format').placeholder = t.formatPlaceholder;
  document.getElementById('lbl-example').childNodes[0].textContent = t.lblExample;
  document.getElementById('example').placeholder = t.examplePlaceholder;
  document.getElementById('assemble').textContent = t.assemble;
  document.getElementById('copy').textContent = t.copy;
  document.getElementById('btn-home').textContent = t.btnHome;
  document.getElementById('btn-persona').textContent = t.btnPersona;
}

// Flexible assemble: only include non-empty fields
function assemblePrompt(){
  const fields = ['situation','context','operation','persona','expectation','format','example'];
  const parts = [];
  fields.forEach(id => {
    const val = document.getElementById(id).value.trim();
    if(val) parts.push(`${translations[currentLang]['lbl' + id.charAt(0).toUpperCase() + id.slice(1)]}: ${val}`);
  });
  parts.push("Then: generate the output following the Format exactly; if the output does not meet Expectation, produce a 1-line rationale and a corrected version.");
  return parts.join('\n');
}

document.getElementById('assemble').addEventListener('click', () => {
  const prompt = assemblePrompt();
  document.getElementById('assembled').textContent = prompt;
});

document.getElementById('copy').addEventListener('click', () => {
  navigator.clipboard.writeText(document.getElementById('assembled').textContent);
  alert(translations[currentLang].alertCopied);
});
</script>

</body>
</html>
